{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "properties": {
      "variables": {
        "type": "object",
        "properties": {
          "environmentVariables": {
            "type": "object",
            "properties": {
              "tenant_id": {
                "type": "string"
              },
              "subscriptionId": {
                "type": "string"
              },
              "environment": {
                "type": "string"
              },
              "location": {
                "type": "string"
              },
              "tags": {
                "type": "string"
              },
              "keyvault": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "resource_group_name": {
                    "type": "string"
                  }
                },
                "required": [
                  "name",
                  "resource_group_name"
                ]
              },
              "connection": {
                "type": "object",
                "properties": {
                  "client_id": {
                    "type": "string"
                  },
                  "client_secret": {
                    "type": "object",
                    "properties": {
                      "keyvault_secret_name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "keyvault_secret_name"
                    ]
                  }
                },
                "required": [
                  "client_id",
                  "client_secret"
                ]
              },
              "backendConfig": {
                "type": "object",
                "properties": {
                  "storage_account_name": {
                    "type": "string"
                  },
                  "container_name": {
                    "type": "string"
                  },
                  "key": {
                    "type": "string"
                  },
                  "access_key": {
                    "type": "object",
                    "properties": {
                      "keyvault_secret_name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "keyvault_secret_name"
                    ]
                  }
                },
                "required": [
                  "storage_account_name",
                  "container_name",
                  "key",
                  "access_key"
                ]
              }
            },
            "required": [
              "tenant_id",
              "subscriptionId",
              "environment",
              "location",
              "tags",
              "keyvault",
              "connection",
              "backendConfig"
            ]
          },
          "base": {
            "type": "object",
            "properties": {
              "resource_group": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name"
                    ]
                  }
                ]
              }
            },
            "required": [
              "resource_group"
            ]
          },
          "network": {
            "type": "object",
            "properties": {
              "virtual_network": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "dns_servers": {
                        "type": "array",
                        "items": {}
                      },
                      "address_space": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "subnets": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "name": {
                                "type": "string"
                              },
                              "address_prefixes": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "service_endpoints": {
                                "type": "array",
                                "items": {}
                              },
                              "delegation": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "name",
                              "address_prefixes",
                              "service_endpoints",
                              "delegation"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "name": {
                                "type": "string"
                              },
                              "address_prefixes": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "service_endpoints": {
                                "type": "array",
                                "items": {}
                              },
                              "delegation": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "name",
                              "address_prefixes",
                              "service_endpoints",
                              "delegation"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "name": {
                                "type": "string"
                              },
                              "address_prefixes": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "service_endpoints": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "delegation": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "name",
                              "address_prefixes",
                              "service_endpoints",
                              "delegation"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "name": {
                                "type": "string"
                              },
                              "address_prefixes": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "service_endpoints": {
                                "type": "array",
                                "items": {}
                              },
                              "delegation": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "name",
                              "address_prefixes",
                              "service_endpoints",
                              "delegation"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "name": {
                                "type": "string"
                              },
                              "address_prefixes": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "service_endpoints": {
                                "type": "array",
                                "items": {}
                              },
                              "delegation": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "name": {
                                        "type": "string"
                                      },
                                      "service_delegation": {
                                        "type": "array",
                                        "items": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "actions": {
                                                "type": "array",
                                                "items": [
                                                  {
                                                    "type": "string"
                                                  }
                                                ]
                                              },
                                              "name": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "actions",
                                              "name"
                                            ]
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "name",
                                      "service_delegation"
                                    ]
                                  }
                                ]
                              }
                            },
                            "required": [
                              "deploy",
                              "name",
                              "address_prefixes",
                              "service_endpoints",
                              "delegation"
                            ]
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "dns_servers",
                      "address_space",
                      "subnets"
                    ]
                  }
                ]
              },
              "public_ip": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "allocation_method": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "sku": {
                        "type": "string"
                      },
                      "sku_tier": {
                        "type": "string"
                      },
                      "domain_name_label": {
                        "type": "string"
                      },
                      "zones": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "allocation_method",
                      "name",
                      "resource_group_name",
                      "sku",
                      "sku_tier",
                      "domain_name_label",
                      "zones"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "allocation_method": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "sku": {
                        "type": "string"
                      },
                      "sku_tier": {
                        "type": "string"
                      },
                      "domain_name_label": {
                        "type": "string"
                      },
                      "zones": {
                        "type": "array",
                        "items": {}
                      }
                    },
                    "required": [
                      "deploy",
                      "allocation_method",
                      "name",
                      "resource_group_name",
                      "sku",
                      "sku_tier",
                      "domain_name_label",
                      "zones"
                    ]
                  }
                ]
              },
              "firewall": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "sku_name": {
                        "type": "string"
                      },
                      "sku_tier": {
                        "type": "string"
                      },
                      "ip_configuration": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "name"
                        ]
                      },
                      "zones": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "virtual_network": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "resource_group_name": {
                            "type": "string"
                          },
                          "subnet_name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "name",
                          "resource_group_name",
                          "subnet_name"
                        ]
                      },
                      "public_ip": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "resource_group_name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "name",
                          "resource_group_name"
                        ]
                      },
                      "policies": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "dns": {
                            "type": "object",
                            "properties": {
                              "servers": {
                                "type": "array",
                                "items": {}
                              },
                              "proxy_enabled": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "servers",
                              "proxy_enabled"
                            ]
                          },
                          "insights": {
                            "type": "object",
                            "properties": {
                              "enabled": {
                                "type": "string"
                              },
                              "default_log_analytics_workspace_id": {
                                "type": "string"
                              },
                              "retention_in_days": {
                                "type": "integer"
                              }
                            },
                            "required": [
                              "enabled",
                              "default_log_analytics_workspace_id",
                              "retention_in_days"
                            ]
                          },
                          "rule_collection_group": {
                            "type": "array",
                            "items": [
                              {
                                "type": "object",
                                "properties": {
                                  "deploy": {
                                    "type": "boolean"
                                  },
                                  "name": {
                                    "type": "string"
                                  },
                                  "priority": {
                                    "type": "integer"
                                  },
                                  "nat_rule_collection": {
                                    "type": "array",
                                    "items": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "priority": {
                                            "type": "integer"
                                          },
                                          "action": {
                                            "type": "string"
                                          },
                                          "rule": {
                                            "type": "array",
                                            "items": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "source_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "protocols": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_ports": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "integer"
                                                      }
                                                    ]
                                                  },
                                                  "translated_address": {
                                                    "type": "string"
                                                  },
                                                  "translated_port": {
                                                    "type": "integer"
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "source_addresses",
                                                  "protocols",
                                                  "destination_ports",
                                                  "translated_address",
                                                  "translated_port"
                                                ]
                                              }
                                            ]
                                          }
                                        },
                                        "required": [
                                          "name",
                                          "priority",
                                          "action",
                                          "rule"
                                        ]
                                      }
                                    ]
                                  },
                                  "network_rule_collection": {
                                    "type": "array",
                                    "items": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "priority": {
                                            "type": "integer"
                                          },
                                          "action": {
                                            "type": "string"
                                          },
                                          "rule": {
                                            "type": "array",
                                            "items": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "protocols": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "source_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_ports": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "integer"
                                                      },
                                                      {
                                                        "type": "integer"
                                                      }
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "protocols",
                                                  "source_addresses",
                                                  "destination_addresses",
                                                  "destination_ports"
                                                ]
                                              },
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "protocols": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "source_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_ports": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "integer"
                                                      }
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "protocols",
                                                  "source_addresses",
                                                  "destination_addresses",
                                                  "destination_ports"
                                                ]
                                              }
                                            ]
                                          }
                                        },
                                        "required": [
                                          "name",
                                          "priority",
                                          "action",
                                          "rule"
                                        ]
                                      }
                                    ]
                                  },
                                  "application_rule_collection": {
                                    "type": "array",
                                    "items": [
                                      {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "priority": {
                                            "type": "integer"
                                          },
                                          "action": {
                                            "type": "string"
                                          },
                                          "rule": {
                                            "type": "array",
                                            "items": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "source_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_fqdns": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "protocols": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "port": {
                                                            "type": "integer"
                                                          },
                                                          "type": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "port",
                                                          "type"
                                                        ]
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "port": {
                                                            "type": "integer"
                                                          },
                                                          "type": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "port",
                                                          "type"
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "source_addresses",
                                                  "destination_fqdns",
                                                  "protocols"
                                                ]
                                              }
                                            ]
                                          }
                                        },
                                        "required": [
                                          "name",
                                          "priority",
                                          "action",
                                          "rule"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "priority": {
                                            "type": "integer"
                                          },
                                          "action": {
                                            "type": "string"
                                          },
                                          "rule": {
                                            "type": "array",
                                            "items": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "source_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_fqdns": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "protocols": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "port": {
                                                            "type": "integer"
                                                          },
                                                          "type": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "port",
                                                          "type"
                                                        ]
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "port": {
                                                            "type": "integer"
                                                          },
                                                          "type": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "port",
                                                          "type"
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "source_addresses",
                                                  "destination_fqdns",
                                                  "protocols"
                                                ]
                                              }
                                            ]
                                          }
                                        },
                                        "required": [
                                          "name",
                                          "priority",
                                          "action",
                                          "rule"
                                        ]
                                      },
                                      {
                                        "type": "object",
                                        "properties": {
                                          "name": {
                                            "type": "string"
                                          },
                                          "priority": {
                                            "type": "integer"
                                          },
                                          "action": {
                                            "type": "string"
                                          },
                                          "rule": {
                                            "type": "array",
                                            "items": [
                                              {
                                                "type": "object",
                                                "properties": {
                                                  "name": {
                                                    "type": "string"
                                                  },
                                                  "source_addresses": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "destination_fqdns": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      },
                                                      {
                                                        "type": "string"
                                                      }
                                                    ]
                                                  },
                                                  "protocols": {
                                                    "type": "array",
                                                    "items": [
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "port": {
                                                            "type": "integer"
                                                          },
                                                          "type": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "port",
                                                          "type"
                                                        ]
                                                      },
                                                      {
                                                        "type": "object",
                                                        "properties": {
                                                          "port": {
                                                            "type": "integer"
                                                          },
                                                          "type": {
                                                            "type": "string"
                                                          }
                                                        },
                                                        "required": [
                                                          "port",
                                                          "type"
                                                        ]
                                                      }
                                                    ]
                                                  }
                                                },
                                                "required": [
                                                  "name",
                                                  "source_addresses",
                                                  "destination_fqdns",
                                                  "protocols"
                                                ]
                                              }
                                            ]
                                          }
                                        },
                                        "required": [
                                          "name",
                                          "priority",
                                          "action",
                                          "rule"
                                        ]
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "deploy",
                                  "name",
                                  "priority",
                                  "nat_rule_collection",
                                  "network_rule_collection",
                                  "application_rule_collection"
                                ]
                              }
                            ]
                          }
                        },
                        "required": [
                          "name",
                          "dns",
                          "insights",
                          "rule_collection_group"
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "sku_name",
                      "sku_tier",
                      "ip_configuration",
                      "zones",
                      "virtual_network",
                      "public_ip",
                      "policies"
                    ]
                  }
                ]
              },
              "application_gateway": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "sku": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "tier": {
                            "type": "string"
                          },
                          "capacity": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "name",
                          "tier",
                          "capacity"
                        ]
                      },
                      "identity": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "type": {
                                "type": "string"
                              },
                              "identity_ids": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "type",
                              "identity_ids"
                            ]
                          }
                        ]
                      },
                      "gateway_ip_configuration": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "subnet_id": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "subnet_id"
                            ]
                          }
                        ]
                      },
                      "frontend_port": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "port": {
                                "type": "integer"
                              }
                            },
                            "required": [
                              "name",
                              "port"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "port": {
                                "type": "integer"
                              }
                            },
                            "required": [
                              "name",
                              "port"
                            ]
                          }
                        ]
                      },
                      "frontend_ip_configuration": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "public_ip_address_id": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "public_ip_address_id"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "subnet_id": {
                                "type": "string"
                              },
                              "private_ip_address": {
                                "type": "string"
                              },
                              "private_ip_address_allocation": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "subnet_id",
                              "private_ip_address",
                              "private_ip_address_allocation"
                            ]
                          }
                        ]
                      },
                      "backend_address_pool": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "ip_addresses": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "name",
                              "ip_addresses"
                            ]
                          }
                        ]
                      },
                      "ssl_certificate": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "key_vault_secret_id": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "key_vault_secret_id"
                            ]
                          }
                        ]
                      },
                      "http_listener": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "frontend_ip_configuration_name": {
                                "type": "string"
                              },
                              "frontend_port_name": {
                                "type": "string"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "ssl_certificate_name": {
                                "type": "string"
                              },
                              "host_name": {
                                "type": "string"
                              },
                              "require_sni": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "name",
                              "frontend_ip_configuration_name",
                              "frontend_port_name",
                              "protocol",
                              "ssl_certificate_name",
                              "host_name",
                              "require_sni"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "frontend_ip_configuration_name": {
                                "type": "string"
                              },
                              "frontend_port_name": {
                                "type": "string"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "ssl_certificate_name": {
                                "type": "string"
                              },
                              "host_name": {
                                "type": "string"
                              },
                              "require_sni": {
                                "type": "boolean"
                              }
                            },
                            "required": [
                              "name",
                              "frontend_ip_configuration_name",
                              "frontend_port_name",
                              "protocol",
                              "ssl_certificate_name",
                              "host_name",
                              "require_sni"
                            ]
                          }
                        ]
                      },
                      "backend_http_settings": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "port": {
                                "type": "integer"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "request_timeout": {
                                "type": "integer"
                              },
                              "cookie_based_affinity": {
                                "type": "string"
                              },
                              "pick_host_name_from_backend_address": {
                                "type": "boolean"
                              },
                              "probe_name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "port",
                              "protocol",
                              "request_timeout",
                              "cookie_based_affinity",
                              "pick_host_name_from_backend_address",
                              "probe_name"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "port": {
                                "type": "integer"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "request_timeout": {
                                "type": "integer"
                              },
                              "cookie_based_affinity": {
                                "type": "string"
                              },
                              "pick_host_name_from_backend_address": {
                                "type": "boolean"
                              },
                              "probe_name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "port",
                              "protocol",
                              "request_timeout",
                              "cookie_based_affinity",
                              "pick_host_name_from_backend_address",
                              "probe_name"
                            ]
                          }
                        ]
                      },
                      "request_routing_rule": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "rule_type": {
                                "type": "string"
                              },
                              "http_listener_name": {
                                "type": "string"
                              },
                              "backend_address_pool_name": {
                                "type": "string"
                              },
                              "backend_http_settings_name": {
                                "type": "string"
                              },
                              "priority": {
                                "type": "integer"
                              },
                              "rewrite_rule_set_name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "rule_type",
                              "http_listener_name",
                              "backend_address_pool_name",
                              "backend_http_settings_name",
                              "priority",
                              "rewrite_rule_set_name"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "rule_type": {
                                "type": "string"
                              },
                              "http_listener_name": {
                                "type": "string"
                              },
                              "backend_address_pool_name": {
                                "type": "string"
                              },
                              "backend_http_settings_name": {
                                "type": "string"
                              },
                              "priority": {
                                "type": "integer"
                              },
                              "rewrite_rule_set_name": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "rule_type",
                              "http_listener_name",
                              "backend_address_pool_name",
                              "backend_http_settings_name",
                              "priority",
                              "rewrite_rule_set_name"
                            ]
                          }
                        ]
                      },
                      "probe": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "interval": {
                                "type": "integer"
                              },
                              "name": {
                                "type": "string"
                              },
                              "path": {
                                "type": "string"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "host": {
                                "type": "string"
                              },
                              "timeout": {
                                "type": "integer"
                              },
                              "unhealthy_threshold": {
                                "type": "integer"
                              },
                              "match": {
                                "type": "object",
                                "properties": {
                                  "status_code": {
                                    "type": "array",
                                    "items": [
                                      {
                                        "type": "string"
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "status_code"
                                ]
                              }
                            },
                            "required": [
                              "interval",
                              "name",
                              "path",
                              "protocol",
                              "host",
                              "timeout",
                              "unhealthy_threshold",
                              "match"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "interval": {
                                "type": "integer"
                              },
                              "name": {
                                "type": "string"
                              },
                              "path": {
                                "type": "string"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "host": {
                                "type": "string"
                              },
                              "timeout": {
                                "type": "integer"
                              },
                              "unhealthy_threshold": {
                                "type": "integer"
                              },
                              "match": {
                                "type": "object",
                                "properties": {
                                  "status_code": {
                                    "type": "array",
                                    "items": [
                                      {
                                        "type": "string"
                                      }
                                    ]
                                  }
                                },
                                "required": [
                                  "status_code"
                                ]
                              }
                            },
                            "required": [
                              "interval",
                              "name",
                              "path",
                              "protocol",
                              "host",
                              "timeout",
                              "unhealthy_threshold",
                              "match"
                            ]
                          }
                        ]
                      },
                      "rewrite_rule_set": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "rewrite_rule": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "name": {
                                        "type": "string"
                                      },
                                      "rule_sequence": {
                                        "type": "integer"
                                      },
                                      "condition": {
                                        "type": "array",
                                        "items": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "ignore_case": {
                                                "type": "boolean"
                                              },
                                              "negate": {
                                                "type": "boolean"
                                              },
                                              "pattern": {
                                                "type": "string"
                                              },
                                              "variable": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "ignore_case",
                                              "negate",
                                              "pattern",
                                              "variable"
                                            ]
                                          }
                                        ]
                                      },
                                      "response_header_configuration": {
                                        "type": "array",
                                        "items": [
                                          {
                                            "type": "object",
                                            "properties": {
                                              "header_name": {
                                                "type": "string"
                                              },
                                              "header_value": {
                                                "type": "string"
                                              }
                                            },
                                            "required": [
                                              "header_name",
                                              "header_value"
                                            ]
                                          }
                                        ]
                                      }
                                    },
                                    "required": [
                                      "name",
                                      "rule_sequence",
                                      "condition",
                                      "response_header_configuration"
                                    ]
                                  }
                                ]
                              }
                            },
                            "required": [
                              "name",
                              "rewrite_rule"
                            ]
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "sku",
                      "identity",
                      "gateway_ip_configuration",
                      "frontend_port",
                      "frontend_ip_configuration",
                      "backend_address_pool",
                      "ssl_certificate",
                      "http_listener",
                      "backend_http_settings",
                      "request_routing_rule",
                      "probe",
                      "rewrite_rule_set"
                    ]
                  }
                ]
              },
              "ip_groups": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "cidrs": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "cidrs"
                    ]
                  }
                ]
              },
              "route_table": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "disable_bgp_route_propagation": {
                        "type": "string"
                      },
                      "route": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "address_prefix": {
                                "type": "string"
                              },
                              "next_hop_type": {
                                "type": "string"
                              },
                              "next_hop_in_ip_address": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "address_prefix",
                              "next_hop_type",
                              "next_hop_in_ip_address"
                            ]
                          }
                        ]
                      },
                      "associated_subnet_ids": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "disable_bgp_route_propagation",
                      "route",
                      "associated_subnet_ids"
                    ]
                  }
                ]
              },
              "network_security_group": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "associated_subnet_ids": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "security_rules": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "source_port_range": {
                                "type": "string"
                              },
                              "destination_port_range": {
                                "type": "string"
                              },
                              "source_address_prefix": {
                                "type": "string"
                              },
                              "destination_address_prefix": {
                                "type": "string"
                              },
                              "access": {
                                "type": "string"
                              },
                              "priority": {
                                "type": "integer"
                              },
                              "direction": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "description",
                              "protocol",
                              "source_port_range",
                              "destination_port_range",
                              "source_address_prefix",
                              "destination_address_prefix",
                              "access",
                              "priority",
                              "direction"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "description": {
                                "type": "string"
                              },
                              "protocol": {
                                "type": "string"
                              },
                              "source_port_range": {
                                "type": "string"
                              },
                              "destination_port_range": {
                                "type": "string"
                              },
                              "source_address_prefix": {
                                "type": "string"
                              },
                              "destination_address_prefix": {
                                "type": "string"
                              },
                              "access": {
                                "type": "string"
                              },
                              "priority": {
                                "type": "integer"
                              },
                              "direction": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "description",
                              "protocol",
                              "source_port_range",
                              "destination_port_range",
                              "source_address_prefix",
                              "destination_address_prefix",
                              "access",
                              "priority",
                              "direction"
                            ]
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "associated_subnet_ids",
                      "security_rules"
                    ]
                  }
                ]
              },
              "private_endpoint": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "subnet_id": {
                        "type": "string"
                      },
                      "target_resource": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "endpoint": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "endpoint"
                            ]
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "subnet_id",
                      "target_resource"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "subnet_id": {
                        "type": "string"
                      },
                      "target_resource": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "endpoint": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              }
                            },
                            "required": [
                              "id",
                              "endpoint"
                            ]
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "subnet_id",
                      "target_resource"
                    ]
                  }
                ]
              }
            },
            "required": [
              "virtual_network",
              "public_ip",
              "firewall",
              "application_gateway",
              "ip_groups",
              "route_table",
              "network_security_group",
              "private_endpoint"
            ]
          },
          "log_analytics": {
            "type": "array",
            "items": [
              {
                "type": "object",
                "properties": {
                  "deploy": {
                    "type": "boolean"
                  },
                  "name": {
                    "type": "string"
                  },
                  "resource_group_name": {
                    "type": "string"
                  },
                  "retention_in_days": {
                    "type": "integer"
                  },
                  "sku": {
                    "type": "string"
                  }
                },
                "required": [
                  "deploy",
                  "name",
                  "resource_group_name",
                  "retention_in_days",
                  "sku"
                ]
              },
              {
                "type": "object",
                "properties": {
                  "deploy": {
                    "type": "boolean"
                  },
                  "name": {
                    "type": "string"
                  },
                  "resource_group_name": {
                    "type": "string"
                  },
                  "retention_in_days": {
                    "type": "integer"
                  },
                  "sku": {
                    "type": "string"
                  }
                },
                "required": [
                  "deploy",
                  "name",
                  "resource_group_name",
                  "retention_in_days",
                  "sku"
                ]
              }
            ]
          },
          "storage": {
            "type": "object",
            "properties": {
              "storage_account": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "account_kind": {
                        "type": "string"
                      },
                      "account_replication_type": {
                        "type": "string"
                      },
                      "account_tier": {
                        "type": "string"
                      },
                      "public_network_access_enabled": {
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "deploy",
                      "resource_group_name",
                      "name",
                      "account_kind",
                      "account_replication_type",
                      "account_tier",
                      "public_network_access_enabled"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "name": {
                        "type": "string"
                      },
                      "account_kind": {
                        "type": "string"
                      },
                      "account_replication_type": {
                        "type": "string"
                      },
                      "account_tier": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "resource_group_name",
                      "name",
                      "account_kind",
                      "account_replication_type",
                      "account_tier"
                    ]
                  }
                ]
              },
              "storage_share": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "storage_account_name": {
                        "type": "string"
                      },
                      "quota": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "storage_account_name",
                      "quota"
                    ]
                  }
                ]
              },
              "storage_container": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "storage_account_name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "storage_account_name"
                    ]
                  }
                ]
              }
            },
            "required": [
              "storage_account",
              "storage_share",
              "storage_container"
            ]
          },
          "keyvault": {
            "type": "object",
            "properties": {
              "keyvault": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "sku_name": {
                        "type": "string"
                      },
                      "network_acls": {
                        "type": "object",
                        "properties": {
                          "bypass": {
                            "type": "string"
                          },
                          "default_action": {
                            "type": "string"
                          },
                          "ip_rules": {
                            "type": "array",
                            "items": {}
                          },
                          "virtual_network_subnet_ids": {
                            "type": "array",
                            "items": {}
                          }
                        },
                        "required": [
                          "bypass",
                          "default_action",
                          "ip_rules",
                          "virtual_network_subnet_ids"
                        ]
                      },
                      "access_policies": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "object_id": {
                                "type": "string"
                              },
                              "secret_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "key_permissions": {
                                "type": "array",
                                "items": {}
                              },
                              "certificate_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "storage_permissions": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "object_id",
                              "secret_permissions",
                              "key_permissions",
                              "certificate_permissions",
                              "storage_permissions"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "object_id": {
                                "type": "string"
                              },
                              "secret_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "key_permissions": {
                                "type": "array",
                                "items": {}
                              },
                              "certificate_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "storage_permissions": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "object_id",
                              "secret_permissions",
                              "key_permissions",
                              "certificate_permissions",
                              "storage_permissions"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "object_id": {
                                "type": "string"
                              },
                              "secret_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "key_permissions": {
                                "type": "array",
                                "items": {}
                              },
                              "certificate_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "storage_permissions": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "object_id",
                              "secret_permissions",
                              "key_permissions",
                              "certificate_permissions",
                              "storage_permissions"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "object_id": {
                                "type": "string"
                              },
                              "secret_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "key_permissions": {
                                "type": "array",
                                "items": {}
                              },
                              "certificate_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "storage_permissions": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "object_id",
                              "secret_permissions",
                              "key_permissions",
                              "certificate_permissions",
                              "storage_permissions"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "deploy": {
                                "type": "boolean"
                              },
                              "object_id": {
                                "type": "string"
                              },
                              "secret_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "key_permissions": {
                                "type": "array",
                                "items": {}
                              },
                              "certificate_permissions": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  },
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "storage_permissions": {
                                "type": "array",
                                "items": {}
                              }
                            },
                            "required": [
                              "deploy",
                              "object_id",
                              "secret_permissions",
                              "key_permissions",
                              "certificate_permissions",
                              "storage_permissions"
                            ]
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "sku_name",
                      "network_acls",
                      "access_policies"
                    ]
                  }
                ]
              },
              "keyvault_certificates": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "key_vault_id": {
                        "type": "string"
                      },
                      "lifetime_action_type": {
                        "type": "string"
                      },
                      "lifetime_percentage": {
                        "type": "integer"
                      },
                      "subject": {
                        "type": "string"
                      },
                      "validity_in_months": {
                        "type": "integer"
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "key_vault_id",
                      "lifetime_action_type",
                      "lifetime_percentage",
                      "subject",
                      "validity_in_months"
                    ]
                  }
                ]
              }
            },
            "required": [
              "keyvault",
              "keyvault_certificates"
            ]
          },
          "monitor": {
            "type": "object",
            "properties": {
              "monitor_diagnostic_setting": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "log_analytics_destination_type": {
                        "type": "string"
                      },
                      "target_resource_ids": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "log_analytics_workspace_id": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "log_analytics_destination_type",
                      "target_resource_ids",
                      "log_analytics_workspace_id"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "target_resource_ids": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "log_analytics_workspace_id": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "target_resource_ids",
                      "log_analytics_workspace_id"
                    ]
                  }
                ]
              }
            },
            "required": [
              "monitor_diagnostic_setting"
            ]
          },
          "compute": {
            "type": "object",
            "properties": {
              "azurerm_linux_virtual_machine_scale_set": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "admin_username": {
                        "type": "string"
                      },
                      "admin_password": {
                        "type": "object",
                        "properties": {
                          "vault_Id": {
                            "type": "string"
                          },
                          "secret_name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "vault_Id",
                          "secret_name"
                        ]
                      },
                      "sku": {
                        "type": "string"
                      },
                      "upgrade_mode": {
                        "type": "string"
                      },
                      "overprovision": {
                        "type": "boolean"
                      },
                      "instances": {
                        "type": "string"
                      },
                      "network_interface": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "primary": {
                                "type": "boolean"
                              },
                              "ip_configuration": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "object",
                                    "properties": {
                                      "name": {
                                        "type": "string"
                                      },
                                      "primary": {
                                        "type": "boolean"
                                      },
                                      "subnet_id": {
                                        "type": "string"
                                      }
                                    },
                                    "required": [
                                      "name",
                                      "primary",
                                      "subnet_id"
                                    ]
                                  }
                                ]
                              }
                            },
                            "required": [
                              "name",
                              "primary",
                              "ip_configuration"
                            ]
                          }
                        ]
                      },
                      "os_disk": {
                        "type": "object",
                        "properties": {
                          "caching": {
                            "type": "string"
                          },
                          "storage_account_type": {
                            "type": "string"
                          },
                          "disk_size_gb": {
                            "type": "integer"
                          }
                        },
                        "required": [
                          "caching",
                          "storage_account_type",
                          "disk_size_gb"
                        ]
                      },
                      "source_image_reference": {
                        "type": "object",
                        "properties": {
                          "publisher": {
                            "type": "string"
                          },
                          "offer": {
                            "type": "string"
                          },
                          "sku": {
                            "type": "string"
                          },
                          "version": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "publisher",
                          "offer",
                          "sku",
                          "version"
                        ]
                      },
                      "data_disk": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "lun": {
                                "type": "integer"
                              },
                              "caching": {
                                "type": "string"
                              },
                              "storage_account_type": {
                                "type": "string"
                              },
                              "disk_size_gb": {
                                "type": "integer"
                              }
                            },
                            "required": [
                              "lun",
                              "caching",
                              "storage_account_type",
                              "disk_size_gb"
                            ]
                          }
                        ]
                      },
                      "extension": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "name": {
                                "type": "string"
                              },
                              "auto_upgrade_minor_version": {
                                "type": "boolean"
                              },
                              "publisher": {
                                "type": "string"
                              },
                              "type": {
                                "type": "string"
                              },
                              "type_handler_version": {
                                "type": "string"
                              },
                              "fileUris": {
                                "type": "array",
                                "items": [
                                  {
                                    "type": "string"
                                  }
                                ]
                              },
                              "commandToExecute": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "name",
                              "auto_upgrade_minor_version",
                              "publisher",
                              "type",
                              "type_handler_version",
                              "fileUris",
                              "commandToExecute"
                            ]
                          }
                        ]
                      },
                      "zpa_access_key": {
                        "type": "object",
                        "properties": {
                          "vault_Id": {
                            "type": "string"
                          },
                          "secret_name": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "vault_Id",
                          "secret_name"
                        ]
                      },
                      "identity": {
                        "type": "object",
                        "properties": {
                          "type": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "type"
                        ]
                      },
                      "plan": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "publisher": {
                            "type": "string"
                          },
                          "product": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "name",
                          "publisher",
                          "product"
                        ]
                      },
                      "automatic_instance_repair": {
                        "type": "object",
                        "properties": {
                          "enabled": {
                            "type": "boolean"
                          }
                        },
                        "required": [
                          "enabled"
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "admin_username",
                      "admin_password",
                      "sku",
                      "upgrade_mode",
                      "overprovision",
                      "instances",
                      "network_interface",
                      "os_disk",
                      "source_image_reference",
                      "data_disk",
                      "extension",
                      "zpa_access_key",
                      "identity",
                      "plan",
                      "automatic_instance_repair"
                    ]
                  }
                ]
              }
            },
            "required": [
              "azurerm_linux_virtual_machine_scale_set"
            ]
          },
          "private_dns": {
            "type": "object",
            "properties": {
              "resource_group_name": {
                "type": "string"
              },
              "private_dns_zone": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "linked_virtual_networks": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "linked_virtual_networks"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "linked_virtual_networks": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "linked_virtual_networks"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "linked_virtual_networks": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "linked_virtual_networks"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "linked_virtual_networks": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "linked_virtual_networks"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "linked_virtual_networks": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "registration_enabled": {
                        "type": "boolean"
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "linked_virtual_networks",
                      "registration_enabled"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "linked_virtual_networks": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "linked_virtual_networks"
                    ]
                  },
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "linked_virtual_networks": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "linked_virtual_networks"
                    ]
                  }
                ]
              }
            },
            "required": [
              "resource_group_name",
              "private_dns_zone"
            ]
          },
          "authorization": {
            "type": "object",
            "properties": {
              "user_assigned_identities": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name"
                    ]
                  }
                ]
              },
              "role_assignments": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "scopes": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "principal_ids": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          },
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "role_definition_names": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "scopes",
                      "principal_ids",
                      "role_definition_names"
                    ]
                  }
                ]
              }
            },
            "required": [
              "user_assigned_identities",
              "role_assignments"
            ]
          },
          "container": {
            "type": "object",
            "properties": {
              "container_groups": {
                "type": "array",
                "items": [
                  {
                    "type": "object",
                    "properties": {
                      "deploy": {
                        "type": "boolean"
                      },
                      "name": {
                        "type": "string"
                      },
                      "resource_group_name": {
                        "type": "string"
                      },
                      "ip_address_type": {
                        "type": "string"
                      },
                      "subnet_ids": {
                        "type": "array",
                        "items": [
                          {
                            "type": "string"
                          }
                        ]
                      },
                      "os_type": {
                        "type": "string"
                      },
                      "container_image": {
                        "type": "string"
                      },
                      "cpu": {
                        "type": "integer"
                      },
                      "memory": {
                        "type": "integer"
                      },
                      "ports": {
                        "type": "array",
                        "items": [
                          {
                            "type": "object",
                            "properties": {
                              "port_number": {
                                "type": "integer"
                              },
                              "protocol": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "port_number",
                              "protocol"
                            ]
                          },
                          {
                            "type": "object",
                            "properties": {
                              "port_number": {
                                "type": "integer"
                              },
                              "protocol": {
                                "type": "string"
                              }
                            },
                            "required": [
                              "port_number",
                              "protocol"
                            ]
                          }
                        ]
                      },
                      "volume": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string"
                          },
                          "storage_account_name": {
                            "type": "string"
                          },
                          "share_name": {
                            "type": "string"
                          },
                          "mount_path": {
                            "type": "string"
                          }
                        },
                        "required": [
                          "name",
                          "storage_account_name",
                          "share_name",
                          "mount_path"
                        ]
                      }
                    },
                    "required": [
                      "deploy",
                      "name",
                      "resource_group_name",
                      "ip_address_type",
                      "subnet_ids",
                      "os_type",
                      "container_image",
                      "cpu",
                      "memory",
                      "ports",
                      "volume"
                    ]
                  }
                ]
              }
            },
            "required": [
              "container_groups"
            ]
          }
        },
        "required": [
          "environmentVariables",
          "base",
          "network",
          "log_analytics",
          "storage",
          "keyvault",
          "monitor",
          "compute",
          "private_dns",
          "authorization",
          "container"
        ]
      }
    },
    "required": [
      "variables"
    ]
  }
